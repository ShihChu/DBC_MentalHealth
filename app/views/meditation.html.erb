<body class="meditation_body">
    <div class="container-fluid">
        <div class="col-12 up-container" align="center">
            <h2 class="font start_msg" style="color: #484848; padding-top: 201px;">
                請找一個安靜的地方<br><br>
                閉上眼睛，穩定呼吸，<br>
                想一下今天在 IG 上發生的事</h2>
        </div>
        
        <div class="col-12 font bottom_card" style="height: 31.5%; padding: 0px; padding-top: 61px;" align="center">
            <input class="meditation_start_btn" type="button" value="開始冥想">
        </div>
    </div>

    <script>
        $(".meditation_start_btn").click(function() {
            $(this).hide();
            $(this).replaceWith("<h2 class='font'>閉上眼睛 ...<br><br>保持穩定呼吸 ...</h2>")
            // replace text with count down clock
            const clock = `<div class="count-down">
                                <span class="spanA">
                                    <em></em>
                                </span>
                                <span class="spanB">
                                    <em></em>
                                </span>
                            
                                <div class="inside_text">
                                    <div class="font number">30</div><br>
                                    <div class="font text">SECONDS</div>
                                </div>
                            </div> `;
            $(".start_msg").replaceWith(clock);
            playAudio();
        });

        function playAudio() {
            const audio = document.createElement("audio");
            audio.src = "/meditation_music.mp3";
            audio.play();
        }

        // change sec text
        setInterval(setTime, 1000);
        function setTime() {
            var currentSec = $(".number").html();
            currentSec--
            $(".number").html(currentSec);
            // hide the count down clock after 30 secs
            if(currentSec == 0) {
                // hide count down clock
                $(".count-down").hide();
                // display finish img
                $(".up-container").html("<img src='/finish_mediation.png' width='279px'>");
                // replace bottom card as btn
                $(".bottom_card").html('<a href="form.html"><input class="form_btn" type="button" value="前往紀錄"></a>');
            }
        }
    </script>
</body>